# ============================================
# UniFoodApp Backend - Variables de Entorno
# ============================================
# 
# IMPORTANTE: 
# - Este archivo es una plantilla. Copia este archivo a .env y completa con tus valores reales.
# - NUNCA commitees el archivo .env real a Git (debe estar en .gitignore)
# - En producción, usa un gestor de secretos (AWS Secrets Manager, HashiCorp Vault, etc.)
#
# ============================================

# ============================================
# APPLICATION
# ============================================
# Entorno de ejecución: development, staging, production
NODE_ENV=development

# Puerto en el que correrá el servidor
PORT=3000

# ============================================
# DATABASE (PostgreSQL)
# ============================================
# Host de la base de datos PostgreSQL
DB_HOST=localhost

# Puerto de PostgreSQL (default: 5432)
DB_PORT=5432

# Usuario de la base de datos
DB_USERNAME=unifood_user

# Contraseña de la base de datos (¡CAMBIAR EN PRODUCCIÓN!)
DB_PASSWORD=your_secure_password_here

# Nombre de la base de datos
DB_NAME=unifood_db

# ============================================
# JWT AUTHENTICATION
# ============================================
# Secreto para firmar tokens JWT (mínimo 32 caracteres, ¡CAMBIAR EN PRODUCCIÓN!)
# Generar con: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-change-in-production

# Tiempo de expiración del token JWT (ej: 1h, 24h, 7d)
JWT_EXPIRATION=1h

# Secreto para refresh tokens (mínimo 32 caracteres, ¡CAMBIAR EN PRODUCCIÓN!)
# Generar con: openssl rand -base64 32
JWT_REFRESH_SECRET=your-refresh-secret-key-minimum-32-characters-change-in-production

# Tiempo de expiración del refresh token (ej: 7d, 30d)
JWT_REFRESH_EXPIRATION=7d

# ============================================
# WOMPI PAYMENT GATEWAY
# ============================================
# Clave pública de Wompi (obtener desde dashboard de Wompi)
WOMPI_PUBLIC_KEY=pub_test_your_wompi_public_key_here

# Clave privada de Wompi (obtener desde dashboard de Wompi)
# ⚠️ MANTENER SECRETO - Nunca exponer en frontend
WOMPI_PRIVATE_KEY=prv_test_your_wompi_private_key_here

# Secret de integridad para verificar webhooks de Wompi
# ⚠️ MANTENER SECRETO - Usado para validar firma de webhooks
WOMPI_INTEGRITY_SECRET=your_wompi_integrity_secret_here

# URL de la API de Wompi
# Desarrollo/Testing: https://sandbox.wompi.co
# Producción: https://production.wompi.co
WOMPI_API_URL=https://sandbox.wompi.co

# ============================================
# SIIGO INVOICING
# ============================================
# URL de la API de Siigo
SIIGO_API_URL=https://api.siigo.com

# Usuario de Siigo (email o username)
SIIGO_USERNAME=your_siigo_username

# Access Key de Siigo (obtener desde dashboard de Siigo)
# ⚠️ MANTENER SECRETO
SIIGO_ACCESS_KEY=your_siigo_access_key_here

# ID del tipo de documento de factura en Siigo
# (Opcional - tiene valor por defecto si no se especifica)
SIIGO_DOCUMENT_ID=24446

# ID del centro de costos en Siigo
# (Opcional - tiene valor por defecto si no se especifica)
SIIGO_COST_CENTER=235

# ID del vendedor en Siigo
# (Opcional - tiene valor por defecto si no se especifica)
SIIGO_SELLER=629

# ID del impuesto (IVA) en Siigo
# (Opcional - tiene valor por defecto si no se especifica)
SIIGO_TAX_ID=13156

# ID del método de pago en efectivo en Siigo
# (Opcional - tiene valor por defecto si no se especifica)
SIIGO_PAYMENT_CASH_ID=5636

# ID del método de pago con tarjeta en Siigo
# (Opcional - tiene valor por defecto si no se especifica)
SIIGO_PAYMENT_CARD_ID=10462

# ============================================
# REDIS / CACHE
# ============================================
# Habilitar Redis (true/false). Si es false, usa cache en memoria
REDIS_ENABLED=true

# Host de Redis
REDIS_HOST=localhost

# Puerto de Redis (default: 6379)
REDIS_PORT=6379

# Contraseña de Redis (opcional, dejar vacío si no tiene contraseña)
REDIS_PASSWORD=

# Tiempo de vida del cache en segundos (default: 300 = 5 minutos)
CACHE_TTL=300

# Máximo número de items en cache (default: 1000)
CACHE_MAX_ITEMS=1000

# ============================================
# CORS CONFIGURATION
# ============================================
# URLs permitidas para staging (separadas por coma)
STAGING_BACKEND_URL=https://staging-api.unifoodapp.com
STAGING_WEB_URL=https://staging.unifoodapp.com

# URLs permitidas para producción (separadas por coma)
PRODUCTION_BACKEND_URL=https://api.unifoodapp.com
PRODUCTION_WEB_URL=https://unifoodapp.com

# ============================================
# LOGGING
# ============================================
# Nivel de logging: debug, info, warn, error
# En desarrollo: debug
# En producción: info o warn
LOG_LEVEL=debug

# ============================================
# EXPO PUSH NOTIFICATIONS (Opcional)
# ============================================
# Access Token de Expo para enviar notificaciones push
# Obtener desde: https://expo.dev/accounts/[account]/settings/access-tokens
# Si no se configura, las notificaciones push no funcionarán
EXPO_ACCESS_TOKEN=your_expo_access_token_here

# ============================================
# NOTAS ADICIONALES
# ============================================
# 
# Generación de Secretos Seguros:
# --------------------------------
# JWT_SECRET y JWT_REFRESH_SECRET:
#   openssl rand -base64 32
#
# Verificación:
# -------------
# Ejecutar el script de auditoría:
#   ./scripts/audit-api-keys.sh
#
# Validación:
# -----------
# Las variables de entorno se validan automáticamente al iniciar la aplicación.
# Si falta alguna variable crítica, la aplicación no iniciará y mostrará un error descriptivo.

# ============================================
# RATE LIMITING (Throttling)
# ============================================
# Configuración de límites de rate limiting para prevenir abuso

# Límites generales (default: 100 requests por minuto)
THROTTLE_TTL_GENERAL=60
THROTTLE_LIMIT_GENERAL=100

# Límites para autenticación (login, confirm-email) (default: 5 requests cada 15 minutos)
THROTTLE_TTL_AUTH=900
THROTTLE_LIMIT_AUTH=5

# Límites para registro (default: 3 requests por hora)
THROTTLE_TTL_REGISTER=3600
THROTTLE_LIMIT_REGISTER=3

# Límites para refresh token (default: 10 requests por minuto)
THROTTLE_TTL_REFRESH=60
THROTTLE_LIMIT_REFRESH=10

# Límites para creación de recursos (POST endpoints) (default: 20 requests por minuto)
THROTTLE_TTL_CREATE=60
THROTTLE_LIMIT_CREATE=20

# Límites para webhooks (default: 100 requests por minuto)
THROTTLE_TTL_WEBHOOK=60
THROTTLE_LIMIT_WEBHOOK=100
